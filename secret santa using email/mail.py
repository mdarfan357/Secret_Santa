import smtplib as s
from secretBakra import secretBakra


import pandas as pd

data = pd.read_csv("receiver.csv")

emailDir = {data.Name[i]:data.Email[i] for i in range(len(data.Name))}

senders_mail = "ABC@gmail.com" # change accordinly


allnames = data.Name

# seed is set to get a non random output for testing the features
# seed = (3, (2147483648, 3108780978, 359024014, 2050833572, 2498511070, 2730921677, 2688502949, 3486971656, 1983438280, 737614909, 3991352347, 2584084909, 2826712251, 3716233381, 489231820, 3620017612, 2494310580, 2992531084, 3538204306, 2548834982, 774927593, 4288052544, 1760241304, 1934981957, 3391262083, 12098322, 2732870245, 3545472506, 1451780673, 1722580130, 1055280885, 3013273557, 967653084, 1139764044, 3014880011, 1770762061, 1553338854, 746724605, 1625738802, 1967738821, 3713693014, 2145870370, 2324958134, 3617427117, 1907198684, 789689592, 507009736, 2092721310, 194427881, 2575274646, 2730398312, 4010352771, 1164009024, 3012091594, 916501024, 3263810481, 3815736313, 2990855305, 4025160648, 4294400884, 762318788, 1197535125, 1807626846, 3877395535, 297013542, 3677817253, 1332439276, 3829776277, 2638272510, 3676593269, 2075667015, 4094577762, 28558654, 1255286540, 1089136455, 2407766231, 4135849406, 1434367359, 3089586751, 562216988, 3458757227, 1184158935, 1020971965, 1198692115, 3044131948, 1996028939, 3305185780, 429723100, 2778856149, 348939648, 3154499032, 3860098221, 2054809949, 3651692387, 1150114872, 3755927865, 1467384988, 1361359118, 3524815050, 3845707477, 1960717212, 220509227, 974411052, 743701282, 2572002643, 993118019, 3538239180, 3067346311, 3764293752, 733803758, 2557870820, 756464976, 539091513, 2324545248, 1735397658, 3381791235, 2574146238, 2167944160, 3609205209, 1338780495, 2103628414, 3935674536, 3200195303, 3683196287, 4178406649, 2728896969, 3805604291, 2877871119, 3768115336, 3395973245, 1264745074, 1514780796, 691119809, 2396447258, 263157297, 908249905, 2889233040, 959599870, 3273085493, 3341212330, 1810526637, 2524841221, 2359548618, 3881035690, 3072288193, 3708239834, 1053657202, 705879077, 3054713684, 1991574699, 4078356751, 2958963296, 3249746188, 1175467727, 2902230912, 3552308432, 2246715815, 2485041596, 2795557301, 3737803574, 65035699, 3404659278, 4174003664, 3434597296, 1604481197, 28305130, 893346527, 2983015586, 746354325, 3664904078, 3731249537, 2961207710, 2129984326, 1089300819, 2171724562, 3739540944, 3885635525, 3879683295, 2945218763, 859139131, 1708138207, 68739441, 2754878849, 1637576921, 1308269845, 1700925783, 1068643435, 4033600322, 4160616190, 1894904510, 2200331538, 435431412, 3148978069, 4113867638, 547439813, 3609179033, 1076689891, 2986303374, 2925763604, 2018446403, 2289307395, 428138683, 153536286, 2916180302, 47833076, 1959640102, 2580898910, 3608946038, 2330108423, 4002487492, 4178745463, 3782172072, 703667157, 57460054, 2200636340, 3701053479, 3894391468, 1927568314, 311986917, 3303807507, 1680377539, 2164067292, 3612811537, 44113546, 2679365048, 3968090018, 3441749070, 3646249398, 2522133382, 106458923, 711210465, 967221114, 2254039422, 1353802166, 1106232917, 36413699, 3167225307, 3661536656, 1873963452, 2877951184, 2022577406, 1880829521, 4100439574, 3397641251, 1453472417, 71382244, 2689075308, 2303089933, 1224638233, 3842271451, 2476533479, 570733747, 316330549, 375917028, 734076273, 2983323924, 1494673983, 2567153877, 3036864557, 3622799508, 1954857396, 759285871, 1057661127, 3477288345, 4185510654, 2767859590, 1071043671, 1739834449, 475608902, 3654969540, 1457620290, 353238851, 4205806668, 2704735494, 1988467450, 4221507231, 2835068740, 3897548448, 2429930131, 3658012375, 1583990425, 3973354273, 1525412060, 811266079, 2483112338, 3018706439, 867388626, 2287956328, 4114002323, 3314797990, 2456731296, 3955354580, 54249581, 343071082, 2660260061, 1378937537, 1731012011, 2756792679, 3109673930, 2587741981, 2112747745, 582243043, 3143920659, 3201625963, 2292979430, 1023570454, 3031081862, 691460711, 1106005512, 2837089812, 1819753928, 3734091315, 1217134824, 2169444017, 3405141994, 592424130, 3152164584, 1524021872, 3026782233, 675576394, 3414642240, 949801996, 3793120929, 480317460, 3924955788, 259093307, 1113711724, 4145472414, 700477824, 1818186640, 2366412353, 1163856564, 3314432490, 2043553274, 388062552, 3206299828, 3499540942, 2129805394, 1389135064, 674762172, 1049321048, 2124702304, 1691401897, 3217266445, 2392325085, 2999720808, 2972647651, 776384977, 1385584979, 1611535329, 2733760723, 3770306371, 2552899705, 1417050990, 2013307789, 3674041405, 1487335063, 1817485012, 28922353, 2141366045, 1261287938, 1583290275, 2091987973, 3279896666, 3942484940, 337320274, 1599511968, 3876905108, 627636664, 826029752, 471405507, 3989783154, 3444101552, 1027273163, 1743536922, 2708515686, 1339257876, 3320516330, 3476505084, 1126746246, 4112177852, 2700821387, 859312476, 625885506, 1078129651, 1980739422, 3589216723, 2869785026, 1581468774, 529583138, 3600924457, 701989874, 795757516, 223647069, 885490984, 599145355, 3309805133, 2624859265, 2607652690, 2740464467, 2242419841, 3022617307, 2528657367, 1332846067, 3843647527, 3041856129, 840602746, 2236557275, 1972738988, 194794576, 3945211458, 3812826688, 1489867728, 4163574369, 1672422144, 765922211, 3327562196, 1968876830, 263908660, 2894753703, 4079106987, 2783934721, 4065281725, 2787940926, 57626881, 2019460193, 3891595222, 3591863907, 3840080569, 2395073532, 2757978114, 769017675, 2028283391, 1213679987, 4248088266, 728673649, 2975569265, 3037434187, 1562814298, 4126565835, 3867526034, 1564037062, 3807852550, 2603174242, 2287588296, 3774177315, 3231275164, 2877580733, 1286376613, 2997119385, 2369482910, 1784016345, 2038674381, 2832912450, 399189532, 2044885954, 148330364, 3421385430, 448835572, 3985003351, 1009282808, 1840362942, 3603380529, 2527035057, 2196963662, 1715524478, 1343829656, 4042504587, 2719722930, 3627608157, 3917707492, 3887565960, 2719473588, 1206562039, 238847275, 78813556, 3734628058, 246774711, 8130550, 631562737, 3694992199, 468461896, 1980265554, 3390531546, 1602966203, 244453167, 106286018, 783772508, 3750427898, 1139340315, 1190990984, 3349447562, 3646916167, 325488470, 402736083, 3048021360, 1744875656, 999956495, 374159931, 3906743783, 4146772068, 252583216, 1455318704, 2371398096, 1732677104, 3389090130, 4020618869, 1614423102, 2908268190, 1481430908, 2553835145, 339859089, 2295374903, 2811565054, 2900812749, 360257314, 2119488792, 2578225786, 2231107625, 2678361382, 436417594, 2165411717, 4041116617, 3331912653, 3394896087, 639424942, 2371707281, 1883398311, 1213953367, 43944854, 2314684238, 1314862315, 3627803166, 87571226, 3253197679, 777711817, 3586369142, 1268409098, 162795374, 1461812875, 2433272346, 3049231866, 516483031, 2197123677, 796945031, 2578794686, 3390407816, 3184530612, 2336288230, 65070428, 2137165832, 2987092250, 1675571881, 3187047420, 883486015, 2896806207, 3682326177, 72729366, 65977891, 3133077567, 1806815817, 67220057, 2821465146, 1727175726, 762895895, 1362251065, 218067223, 2595870275, 101170822, 80348238, 916646565, 877568316, 1249424018, 2891590564, 2842484138, 3424079766, 2228901994, 629519657, 1049804220, 888436995, 3542770361, 4201386005, 545444925, 1974079681, 1870124267, 570920600, 1456335623, 773754279, 3707825562, 3897488009, 3022435103, 1020520941, 1334117444, 180774227, 201863813, 2094172907, 1667953698, 446296554, 3403074812, 1163287457, 1436162480, 734181150, 3114665482, 3183742936, 1997380080, 1351853846, 3142939444, 428020647, 1211760374, 1092847123, 1620307918, 232144619, 374588772, 2891022390, 658751635, 2921550723, 3343942491, 2997719984, 1434630171, 1085592414, 3517189913, 3867817093, 1776073823, 689574216, 624), None)
random_name_run = secretBakra(allnames)
 
if random_name_run.check(): 
    bakra = random_name_run()

    print("Sending emails")

    for i in allnames:
        user = i
        
        ob = s.SMTP("smtp.gmail.com",587)
        ob.ehlo()
        ob.starttls()
        ob.login("mdarfan149@gmail.com","cuqeyodlyfrxeepl")
        
        subject = "SECRET BAKRA 2023"
        
        body = f"Hi {user}!! \nThis is an Email regarding SECRET BAKRA \nYour bakra is {bakra[user]}"
        
        message = f"subject:{subject}\n\n{body}"
        listadd = emailDir[user] # reciver email
        
        ob.sendmail(senders_mail,listadd,message)
        print(f"sent mail to {user}")

    print("Completed sending")
    ob.quit()
